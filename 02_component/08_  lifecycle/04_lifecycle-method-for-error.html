<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id = "root"></div>


    <script type = "text/babel">
        
        class ErrorBoundery extends React.Component{
            state = {
                // error ë°œìƒì‹œ ìƒíƒœë¥¼ ë°”ê¾¸ê³  í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë ¤ì¤Œ
                hasError : false
            }

            // 1. ìì† ì»´í¬ë„ŒíŠ¸ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ ìë™ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ
            static getDerivedStateFromError(error){
                
                /*
                    ë§¤ê°œë³€ìˆ˜ë¡œ ì˜¤ë¥˜ë¥¼ ì „ë‹¬ ë°›ê³ , ê°±ì‹ ëœ stateê°’ì„ ë°˜ë“œì‹œ ë°˜í™˜
                    ì£¼ì˜í•  ì : 
                    render ë‹¨ê³„ì—ì„œ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ë¶€ìˆ˜ì ì¸ íš¨ê³¼ë¥¼ ì—¬ê¸°ì„œëŠ” ë°œìƒì‹œí‚¤ë©´ ì•ˆ ëœë‹¤.
                */
            
                // ëœë”ë§ ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ë¯€ë¡œ hasErrorê°€ ì•„ë‹Œ ë‹¤ë¥¸ stateë¥¼
                // ë³€ê²½í•˜ê²Œ ë˜ë©´ ë¬´í•œë£¨í”„ì— ë¹ ì§
                // ë‹¤ì‹œ getDerviedStateê°€ ë™ì‘ -> setState() -> Error ë°œìƒ
                // -> getDerviedState ë™ì‘
                console.log('getDerivedStateFromError');
                

                // ìš°ë¦¬ê°€ ë°”ê¿€ stateë¥¼ ë¦¬í„´í•´ì¤€ë‹¤.
                return {hasError : true};
            }

            render(){
                return(
                        <>
                            <h1>ğŸ’¥ì‚ìš©ì‚ìš©ğŸ’¥</h1>
                            <h1>ğŸ’«ì—ëŸ¬ë°œìƒ! ì—ëŸ¬ë°œìƒ!ğŸ’«</h1>
                            <h2>âš¡âœ¨ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë’¤ë¡œê°€ì„¸ìš”âš¡âœ¨</h2>
                        </>
                    )
                    
                return this.props.children; 
                // ë³„ë‹¤ë¥¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€í•˜ì§€ ì•Šê³  ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‚´ë³´ëƒ„
            }
        }
        
        class TimePrinter extends React.Component{

            state = {
                now : new Date().toLocaleTimeString()
            };

            render(){
                if(this.state.hasError){
                    
                }
                return (
                    <>
                        <button
                            onClick={() => this.setState({now : new Date().toLocaleTimeString()})}
                        >
                            í˜„ì¬ ì‹œê°„ í™•ì¸í•˜ê¸°
                        </button>
                        <h1>{this.state.now}</h1>
                    </>
                )
            }
        }

        class App extends React.Component{
            render(){
                return(
                    <ErrorBoundery>
                        <TimePrinter/>
                    </ErrorBoundery>
                )
            }
        }
        
        ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
    </script>
</body>
</html>